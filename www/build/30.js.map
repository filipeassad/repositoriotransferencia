{"version":3,"sources":["../../src/pages/listagem-faturas-negociacao/listagem-faturas-negociacao.module.ts","../../src/pages/listagem-faturas-negociacao/listagem-faturas-negociacao.ts"],"names":[],"mappings":"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","file":"30.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ListagemFaturasNegociacaoPage } from './listagem-faturas-negociacao';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ListagemFaturasNegociacaoPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ListagemFaturasNegociacaoPage),\r\n  ],\r\n})\r\nexport class ListagemFaturasNegociacaoPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/listagem-faturas-negociacao/listagem-faturas-negociacao.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\r\nimport { Negociacao } from '../../models/negociacao.model';\r\nimport { NegociacaoService } from '../../providers/negociacao.service';\r\nimport { Autorizacao } from '../../models/autorizacao.model';\r\nimport { NegociacaoItem } from '../../models/negociacao-item.model';\r\nimport { NegociacaoItemEstaticoService } from '../../providers/negociacao-item-estatico.service';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-listagem-faturas-negociacao',\r\n    templateUrl: 'listagem-faturas-negociacao.html',\r\n})\r\nexport class ListagemFaturasNegociacaoPage {\r\n\r\n    private itensNegociacao: NegociacaoItem[] = [];\r\n    private negociacaoSelecionada: Negociacao;\r\n    private desabilitaAceitacao: boolean = true;\r\n\r\n\r\n    constructor(public navCtrl: NavController,\r\n                public navParams: NavParams,\r\n                private negociacaoService: NegociacaoService,\r\n                private loadingCtrl: LoadingController,\r\n                private negociacaoItemEstaticoService: NegociacaoItemEstaticoService) {\r\n        \r\n        this.negociacaoSelecionada = this.navParams.get('negociacaoSelecionada');\r\n        this.itensNegociacao = this.negociacaoSelecionada.tbSolNegociacaoItems;\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n    }\r\n\r\n    ionViewDidEnter(){\r\n        if(this.negociacaoItemEstaticoService.negociacaoItemAlterado){\r\n            let itemNegociacaoAlterado = this.negociacaoItemEstaticoService.negociacaoItemAlterado;\r\n            let index = 0;\r\n                    \r\n            for(let i = 0; i < this.itensNegociacao.length; i++){\r\n                if(this.itensNegociacao[i].sniId = itemNegociacaoAlterado.sniId)\r\n                    index = i;\r\n            }\r\n            this.itensNegociacao.splice(index, 1);\r\n            this.itensNegociacao.push(itemNegociacaoAlterado);\r\n            this.liberarAceitacao();\r\n            this.negociacaoItemEstaticoService.negociacaoItemAlterado = null;\r\n        }\r\n        \r\n    }\r\n\r\n    aceitarTermos(){\r\n        let loader = this.loadingCtrl.create({\r\n            content: \"Por favor aguarde...\",\r\n        });\r\n\r\n        this.negociacaoService.confirmarNegociacao(this.negociacaoSelecionada.snId)\r\n        .subscribe(resultado => {\r\n            this.navCtrl.pop();\r\n            loader.dismiss();\r\n        }, () => {\r\n            loader.dismiss();\r\n        });\r\n    }\r\n\r\n    liberarAceitacao(){\r\n        let quantidadeNegociados = 0;\r\n        for (let item of this.itensNegociacao) {\r\n            if(item.sniCondicaopagamento != null)\r\n                quantidadeNegociados++;\r\n        }\r\n\r\n        this.desabilitaAceitacao = quantidadeNegociados != this.itensNegociacao.length\r\n                                    || (this.negociacaoSelecionada.snDataaceite != null || this.negociacaoSelecionada.snDataaceite != null) ;\r\n    }\r\n\r\n    rejeitarTermos(){\r\n        let loader = this.loadingCtrl.create({\r\n            content: \"Por favor aguarde...\",\r\n        });\r\n\r\n        this.negociacaoService.rejeitarNegociacao(this.negociacaoSelecionada.snId)\r\n        .subscribe(resultado => {\r\n            this.navCtrl.pop();\r\n            loader.dismiss();\r\n        }, () => {\r\n            loader.dismiss();\r\n        });\r\n    }\r\n\r\n    negociacaoFatura(itemNegociacaoSelecionada){\r\n        this.navCtrl.push('NegociacaoPage', {'itemNegociacaoSelecionada': itemNegociacaoSelecionada});\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/listagem-faturas-negociacao/listagem-faturas-negociacao.ts"],"sourceRoot":""}