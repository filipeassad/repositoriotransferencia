{"version":3,"sources":["../../src/pages/revalidacao/lista-grupo-familiar-revalidacao/lista-grupo-familiar-revalidacao.module.ts","../../src/pages/revalidacao/lista-grupo-familiar-revalidacao/lista-grupo-familiar-revalidacao.ts"],"names":[],"mappings":"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","file":"27.js","sourcesContent":["import {CUSTOM_ELEMENTS_SCHEMA, NgModule} from '@angular/core';\r\nimport {IonicPageModule} from \"ionic-angular\";\r\nimport {PipeModule} from \"../../../pipes/pipe.module\";\r\nimport {ListaGrupoFamiliarRevalidacaoPage} from \"./lista-grupo-familiar-revalidacao\";\r\n\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ListaGrupoFamiliarRevalidacaoPage\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(ListaGrupoFamiliarRevalidacaoPage),\r\n        PipeModule\r\n    ],\r\n    exports: [ListaGrupoFamiliarRevalidacaoPage],\r\n    schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n    providers: [],\r\n})\r\nexport class ListaGrupoFamiliarRevalidacaoModule {\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/revalidacao/lista-grupo-familiar-revalidacao/lista-grupo-familiar-revalidacao.module.ts","import {Component} from \"@angular/core\";\r\nimport {AlertController, IonicPage, LoadingController, NavController} from \"ionic-angular\";\r\nimport {ToastHelper} from \"../../../helpers/toast.helper\";\r\nimport {RevalidacaoService} from \"../../../providers/revalidacao.service\";\r\nimport {EnViPortalBeneficiario} from \"../../../models/beneficiario/benner/en-vi-portal-beneficiario.model\";\r\nimport {StorageService} from \"../../../providers/storage.service\";\r\nimport {DtoAuxiliar} from \"../../../models/dto/dto-auxiliar\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-lista-grupo-familiar-revalidacao',\r\n  templateUrl: 'lista-grupo-familiar-revalidacao.html'\r\n})\r\nexport class ListaGrupoFamiliarRevalidacaoPage {\r\n  listaBeneficiarios: EnViPortalBeneficiario[] = [];\r\n  private beneficiario: EnViPortalBeneficiario;\r\n\r\n\r\n  constructor(private alertCtrl: AlertController,\r\n              private toastHelper: ToastHelper,\r\n              private navCtrl: NavController,\r\n              private loadingCtrl: LoadingController,\r\n              private revalidacaoService: RevalidacaoService,\r\n              private storageService: StorageService) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    let loader = this.loadingCtrl.create({\r\n      content: \"Por favor aguarde...\",\r\n    });\r\n    loader.present();\r\n    this.storageService.getBeneficiario()\r\n      .then(beneficiario => {\r\n        this.beneficiario = beneficiario;\r\n        this.revalidacaoService.listaGrupoFamiliarAptoRevalidacao(this.beneficiario.handleTitular).subscribe((lista: EnViPortalBeneficiario[]) => {\r\n          this.listaBeneficiarios = lista.map(beneficiario => {\r\n            return beneficiario;\r\n          });\r\n          loader.dismiss();\r\n        }, error => {\r\n          loader.dismiss();\r\n          this.toastHelper.notificacaoErroCarregarDados();\r\n        });\r\n      }, error => {\r\n        loader.dismiss();\r\n        this.toastHelper.notificacaoErroCarregarDados();\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Metodo utilizado para recarregar a lista de beneficiarios aptos para revalidacao\r\n   *\r\n   * @author Anderson Friaca\r\n   * @since v2.2.0 22/05/2017\r\n   * @param refresher\r\n   */\r\n  recarregarDados(refresher = null) {\r\n    this.revalidacaoService.listaGrupoFamiliarAptoRevalidacao(this.beneficiario.handleTitular).subscribe((lista: EnViPortalBeneficiario[]) => {\r\n      this.listaBeneficiarios = lista.map(beneficiario => {\r\n        return beneficiario;\r\n      });\r\n      if (refresher != null) {\r\n        refresher.complete();\r\n      }\r\n    }, () => {\r\n      if (refresher != null) {\r\n        refresher.complete();\r\n      }\r\n      this.toastHelper.notificacaoErroCarregarDados();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Metodo utilizado para realizar o direcionamento das revalidacoes\r\n   *\r\n   * @author Anderson Friaca\r\n   * @since v2.2.0 22/05/2017\r\n   * @param beneficiario\r\n   */\r\n  revalidar(beneficiario: EnViPortalBeneficiario) {\r\n    if (beneficiario.titular === 'S') {\r\n      if (parseInt(beneficiario.codVinculo) === 103) {\r\n        return this.navCtrl.push('TermoConvocadoPage', {'Beneficiario': beneficiario});\r\n      } else {\r\n        let confirm = this.alertCtrl.create({\r\n          title: 'Deseja atualizar o seu endereço?',\r\n          buttons: [\r\n            {\r\n              text: 'Não',\r\n              handler: () => {\r\n                //confirm.dismiss();\r\n                let loader = this.loadingCtrl.create({\r\n                  content: \"Por favor aguarde...\",\r\n                });\r\n                loader.present();\r\n                this.revalidacaoService.revalidarBeneficiario(\r\n                  beneficiario.matriculaCassems\r\n                ).subscribe((auxiliar: DtoAuxiliar) => {\r\n                  loader.dismiss();\r\n                  this.toastHelper.notificacaoMensagem(auxiliar.descricaoCompleta);\r\n                  this.navCtrl.setRoot('ListaGrupoFamiliarRevalidacaoPage');\r\n                }, error => {\r\n                  loader.dismiss();\r\n                  if (error.status == 400) {\r\n                    this.toastHelper.notificacaoMensagem(error.error.descricaoCompleta);\r\n                  } else {\r\n                    this.toastHelper.notificacaoMensagem('Ocorreu um erro interno, por favor tente novamente mais tarde');\r\n                  }\r\n                });\r\n              }\r\n            },\r\n            {\r\n              text: 'Sim',\r\n              handler: () => {\r\n                this.navCtrl.push('RevalidacaoAtualizarEnderecoPage', {'Beneficiario': beneficiario});\r\n              }\r\n            }\r\n          ]\r\n        });\r\n        confirm.present();\r\n      }\r\n    } else {\r\n      let loader = this.loadingCtrl.create({\r\n        content: \"Por favor aguarde...\",\r\n      });\r\n      loader.present();\r\n      this.revalidacaoService.revalidarBeneficiario(\r\n        beneficiario.matriculaCassems\r\n      ).subscribe((auxiliar: DtoAuxiliar) => {\r\n        loader.dismiss();\r\n        this.toastHelper.notificacaoMensagem(auxiliar.descricaoCompleta);\r\n        this.recarregarDados();\r\n      }, error => {\r\n        if (error.status == 400) {\r\n          this.toastHelper.notificacaoMensagem(error.error.descricaoCompleta);\r\n        } else {\r\n          this.toastHelper.notificacaoMensagem('Ocorreu um erro interno, por favor tente novamente mais tarde');\r\n        }\r\n        loader.dismiss();\r\n      });\r\n\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/revalidacao/lista-grupo-familiar-revalidacao/lista-grupo-familiar-revalidacao.ts"],"sourceRoot":""}