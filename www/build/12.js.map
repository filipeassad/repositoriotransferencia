{"version":3,"sources":["../../src/pages/usuario/perfil/perfil.module.ts","../../src/models/usuario.model.ts","../../src/pages/usuario/perfil/perfil.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import {NgModule} from \"@angular/core\";\r\nimport {IonicPageModule} from \"ionic-angular\";\r\nimport {PerfilPage} from \"./perfil\";\r\nimport {PipeModule} from \"../../../pipes/pipe.module\";\r\n\r\n@NgModule({\r\n    declarations:[\r\n        PerfilPage\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(PerfilPage),\r\n        PipeModule\r\n    ],\r\n    exports: [PerfilPage],\r\n    schemas: [],\r\n    providers: [],\r\n\r\n})\r\nexport class PerfilModule{\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/usuario/perfil/perfil.module.ts","import {Beneficiario} from \"./beneficiario.model\";\r\nexport class Usuario{\r\n\r\n    private _username: string;\r\n    private _password: string;\r\n    private _beneficiario: Beneficiario;\r\n    private _idFacebook: string;\r\n    private _idGooglePlus: string;\r\n    private _matricula: string;\r\n\r\n\r\n    get username(): string {\r\n        return this._username;\r\n    }\r\n\r\n    set username(value: string) {\r\n        this._username = value;\r\n    }\r\n\r\n    get password(): string {\r\n        return this._password;\r\n    }\r\n\r\n    set password(value: string) {\r\n        this._password = value;\r\n    }\r\n\r\n    get beneficiario(): Beneficiario {\r\n        return this._beneficiario;\r\n    }\r\n\r\n    set beneficiario(value: Beneficiario) {\r\n        this._beneficiario = value;\r\n    }\r\n\r\n    get idFacebook(): string {\r\n        return this._idFacebook;\r\n    }\r\n\r\n    set idFacebook(value: string) {\r\n        this._idFacebook = value;\r\n    }\r\n\r\n    get idGooglePlus(): string {\r\n        return this._idGooglePlus;\r\n    }\r\n\r\n    set idGooglePlus(value: string) {\r\n        this._idGooglePlus = value;\r\n    }\r\n\r\n    get matricula(): string {\r\n        return this._matricula;\r\n    }\r\n\r\n    set matricula(value: string) {\r\n        this._matricula = value;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/usuario.model.ts","import {Component} from \"@angular/core\";\r\nimport {IonicPage, LoadingController, NavController} from \"ionic-angular\";\r\nimport {ToastHelper} from \"../../../helpers/toast.helper\";\r\nimport {UsuarioService} from \"../../../providers/usuario.service\";\r\nimport {Usuario} from \"../../../models/usuario.model\";\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport {Facebook, FacebookLoginResponse} from \"@ionic-native/facebook\";\r\nimport {StorageService} from \"../../../providers/storage.service\";\r\nimport {EnViPortalBeneficiario} from \"../../../models/beneficiario/benner/en-vi-portal-beneficiario.model\";\r\nimport {BeneficiarioBennerService} from \"../../../providers/beneficiario/benner/beneficiario-benner.service\";\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-perfil',\r\n    templateUrl: 'perfil.html'\r\n})\r\nexport class PerfilPage {\r\n\r\n    beneficiario: EnViPortalBeneficiario = new EnViPortalBeneficiario();\r\n    usuario: Usuario = new Usuario();\r\n\r\n    constructor(private loadingCtrl: LoadingController,\r\n                private navCtrl: NavController,\r\n                private toastHelper: ToastHelper,\r\n                private usuarioService: UsuarioService,\r\n                private facebook: Facebook,\r\n                private storageService: StorageService,\r\n                private beneficiarioBennerService: BeneficiarioBennerService\r\n    ) {\r\n\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        let loader = this.loadingCtrl.create({\r\n            content: \"Por favor aguarde...\",\r\n        });\r\n        loader.present();\r\n        Promise.all([\r\n            this.storageService.getUsuario(),\r\n            this.storageService.getBeneficiario()\r\n        ]).then(result => {\r\n            this.usuario = result[0];\r\n            this.beneficiario = result[1];\r\n            loader.dismiss();\r\n        }, () => {\r\n            loader.dismiss();\r\n            this.toastHelper.notificacaoErroCarregarDados();\r\n        });\r\n    }\r\n\r\n    alterarSenha() {\r\n        this.navCtrl.push('AlterarSenhaUsuarioPage');\r\n    }\r\n\r\n    recarregarDados(refresher) {\r\n        Observable.forkJoin(\r\n            this.usuarioService.buscarUsuario(this.usuario.username),\r\n            this.beneficiarioBennerService.buscarBeneficiarioCpf(this.beneficiario.cpf)\r\n        ).subscribe(result => {\r\n            Promise.all([\r\n                this.storageService.setUsuario(result[0]),\r\n                this.storageService.setBeneficiario(result[1])\r\n            ])\r\n                .then(() => {\r\n                    refresher.complete();\r\n                }, () => {\r\n                    this.toastHelper.notificacaoErroCarregarDados();\r\n                    refresher.complete();\r\n                });\r\n        }, () => {\r\n            this.toastHelper.notificacaoErroCarregarDados();\r\n            refresher.complete();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Metodo utilizado para vincular o usuario atual a uma conta do Facebook\r\n     *\r\n     * @author Anderson Friaca\r\n     */\r\n    vincularUsuarioFacebook() {\r\n        let loader = this.loadingCtrl.create({\r\n            content: \"Por favor aguarde...\",\r\n        });\r\n        loader.present();\r\n        this.facebook.login(['public_profile']).then((response: FacebookLoginResponse) => {\r\n            this.usuarioService.vincularUsuarioRedeSocial(this.usuario.username, response.authResponse.userID).subscribe(() => {\r\n                this.usuario.idFacebook = response.authResponse.userID;\r\n                this.storageService.setUsuario(this.usuario)\r\n                    .then(() => {\r\n                        loader.dismiss();\r\n                    }, () => {\r\n                        loader.dismiss();\r\n                    });\r\n            }, error => {\r\n                let mensagemErro = 'Ocorreu um erro ao vincular sua conta do Facebook, por favor tente novamente mais tarde';\r\n                if (error.status == 400) {\r\n                    mensagemErro = 'Esta conta do Facebook já possui vinculação';\r\n                }\r\n                this.facebook.logout().then(() => {\r\n                    loader.dismiss();\r\n                    this.toastHelper.notificacaoMensagem(mensagemErro);\r\n                }, () => {\r\n                    loader.dismiss();\r\n                    this.toastHelper.notificacaoMensagem(mensagemErro);\r\n                });\r\n            });\r\n        }, () => {\r\n            loader.dismiss();\r\n            this.toastHelper.notificacaoMensagem('Não foi possível realizar o login pelo Facebook, por favor tente novamente mais tarde');\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @TODO\r\n     */\r\n    vincularUsuarioGooglePlus() {\r\n\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/usuario/perfil/perfil.ts"],"sourceRoot":""}