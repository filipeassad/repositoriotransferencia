{"version":3,"sources":["../../src/pages/usuario/perfil/perfil.module.ts","../../src/models/usuario.model.ts","../../src/pages/usuario/perfil/perfil.ts"],"names":[],"mappings":"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","file":"58.js","sourcesContent":["import {NgModule} from \"@angular/core\";\nimport {IonicPageModule} from \"ionic-angular\";\nimport {PerfilPage} from \"./perfil\";\nimport {PipeModule} from \"../../../pipes/pipe.module\";\n\n@NgModule({\n    declarations:[\n        PerfilPage\n    ],\n    imports: [\n        IonicPageModule.forChild(PerfilPage),\n        PipeModule\n    ],\n    exports: [PerfilPage],\n    schemas: [],\n    providers: [],\n\n})\nexport class PerfilModule{\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/usuario/perfil/perfil.module.ts","import {Beneficiario} from \"./beneficiario.model\";\nexport class Usuario{\n\n    private _username: string;\n    private _password: string;\n    private _beneficiario: Beneficiario;\n    private _idFacebook: string;\n    private _idGooglePlus: string;\n    private _matricula: string;\n\n\n    get username(): string {\n        return this._username;\n    }\n\n    set username(value: string) {\n        this._username = value;\n    }\n\n    get password(): string {\n        return this._password;\n    }\n\n    set password(value: string) {\n        this._password = value;\n    }\n\n    get beneficiario(): Beneficiario {\n        return this._beneficiario;\n    }\n\n    set beneficiario(value: Beneficiario) {\n        this._beneficiario = value;\n    }\n\n    get idFacebook(): string {\n        return this._idFacebook;\n    }\n\n    set idFacebook(value: string) {\n        this._idFacebook = value;\n    }\n\n    get idGooglePlus(): string {\n        return this._idGooglePlus;\n    }\n\n    set idGooglePlus(value: string) {\n        this._idGooglePlus = value;\n    }\n\n    get matricula(): string {\n        return this._matricula;\n    }\n\n    set matricula(value: string) {\n        this._matricula = value;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/usuario.model.ts","import {Component} from \"@angular/core\";\nimport {IonicPage, LoadingController, NavController} from \"ionic-angular\";\nimport {ToastHelper} from \"../../../helpers/toast.helper\";\nimport {UsuarioService} from \"../../../providers/usuario.service\";\nimport {Usuario} from \"../../../models/usuario.model\";\nimport {Observable} from \"rxjs/Observable\";\nimport {Facebook, FacebookLoginResponse} from \"@ionic-native/facebook\";\nimport {StorageService} from \"../../../providers/storage.service\";\nimport {EnViPortalBeneficiario} from \"../../../models/beneficiario/benner/en-vi-portal-beneficiario.model\";\nimport {BeneficiarioBennerService} from \"../../../providers/beneficiario/benner/beneficiario-benner.service\";\n\n@IonicPage()\n@Component({\n    selector: 'page-perfil',\n    templateUrl: 'perfil.html'\n})\nexport class PerfilPage {\n\n    beneficiario: EnViPortalBeneficiario = new EnViPortalBeneficiario();\n    usuario: Usuario = new Usuario();\n\n    constructor(private loadingCtrl: LoadingController,\n                private navCtrl: NavController,\n                private toastHelper: ToastHelper,\n                private usuarioService: UsuarioService,\n                private facebook: Facebook,\n                private storageService: StorageService,\n                private beneficiarioBennerService: BeneficiarioBennerService\n    ) {\n\n    }\n\n    ionViewDidLoad() {\n        let loader = this.loadingCtrl.create({\n            content: \"Por favor aguarde...\",\n        });\n        loader.present();\n        Promise.all([\n            this.storageService.getUsuario(),\n            this.storageService.getBeneficiario()\n        ]).then(result => {\n            this.usuario = result[0];\n            this.beneficiario = result[1];\n            loader.dismiss();\n        }, () => {\n            loader.dismiss();\n            this.toastHelper.notificacaoErroCarregarDados();\n        });\n    }\n\n    alterarSenha() {\n        this.navCtrl.push('AlterarSenhaUsuarioPage');\n    }\n\n    recarregarDados(refresher) {\n        Observable.forkJoin(\n            this.usuarioService.buscarUsuario(this.usuario.username),\n            this.beneficiarioBennerService.buscarBeneficiarioCpf(this.beneficiario.cpf)\n        ).subscribe(result => {\n            Promise.all([\n                this.storageService.setUsuario(result[0]),\n                this.storageService.setBeneficiario(result[1])\n            ])\n                .then(() => {\n                    refresher.complete();\n                }, () => {\n                    this.toastHelper.notificacaoErroCarregarDados();\n                    refresher.complete();\n                });\n        }, () => {\n            this.toastHelper.notificacaoErroCarregarDados();\n            refresher.complete();\n        });\n    }\n\n    /**\n     * Metodo utilizado para vincular o usuario atual a uma conta do Facebook\n     *\n     * @author Anderson Friaca\n     */\n    vincularUsuarioFacebook() {\n        let loader = this.loadingCtrl.create({\n            content: \"Por favor aguarde...\",\n        });\n        loader.present();\n        this.facebook.login(['public_profile']).then((response: FacebookLoginResponse) => {\n            this.usuarioService.vincularUsuarioRedeSocial(this.usuario.username, response.authResponse.userID).subscribe(() => {\n                this.usuario.idFacebook = response.authResponse.userID;\n                this.storageService.setUsuario(this.usuario)\n                    .then(() => {\n                        loader.dismiss();\n                    }, () => {\n                        loader.dismiss();\n                    });\n            }, error => {\n                let mensagemErro = 'Ocorreu um erro ao vincular sua conta do Facebook, por favor tente novamente mais tarde';\n                if (error.status == 400) {\n                    mensagemErro = 'Esta conta do Facebook já possui vinculação';\n                }\n                this.facebook.logout().then(() => {\n                    loader.dismiss();\n                    this.toastHelper.notificacaoMensagem(mensagemErro);\n                }, () => {\n                    loader.dismiss();\n                    this.toastHelper.notificacaoMensagem(mensagemErro);\n                });\n            });\n        }, () => {\n            loader.dismiss();\n            this.toastHelper.notificacaoMensagem('Não foi possível realizar o login pelo Facebook, por favor tente novamente mais tarde');\n        });\n    }\n\n    /**\n     * @TODO\n     */\n    vincularUsuarioGooglePlus() {\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/usuario/perfil/perfil.ts"],"sourceRoot":""}